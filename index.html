<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
    <style>
        body{
            font: bold 11pt Arial;
            background-color: rgba(238, 238, 108, 0.884);
            text-align: left;
            display: grid;
        }
    </style>
</head>
<body>

<!--
    Formulários
    
    Para que serve?
    - Capturar dados de entrada (input)
    - Interação
    - Controle

    <form>
    - É um elemento que definirá um formulário
    - É um container estilo <section>

    Atributos básicos
    - action: para onde vai ser enviado, em branco nao envia pra nenhum
        canto e volta para a página.
    - method: POST e GET, por enquanto, GET é um verbo HTTP que envia para action (destinatario) de
      uma forma que apresenta dados na url.
    POST por sua vez nao apresenta dados na URL

    Obs: Não criamos o form dentro de form, pode ser que ele nao entenda pra onde enviar os daods 
-->
    
    <form action="POST" name="primeiro_formulario" id="formulario">

        <fieldset> <!--CRIA O AGRUPAMENTO-->
            <legend>Cadastro de aluno</legend> <!--NOME DO AGRUPAMENTO-->

            <div>
                <!--Linkei pelo for e o id, se clicar 
                somente na palavra nome que esta
                entre o label, ele faz a seta de
                entrada de dados dentro do input-->
                <label for="id_nome">Nome: 
                    <input type="text" name="nome" id="id_nome"
                    required 
                    placeholder="Informe seu nome"
                    minlength="6" maxlength="50">
                    <!---minlenght / maxlength* 
                    0 mínimo e/ou máximo valor que o campo irá conter-->
                </label>


                <br/>
            </div>

            <div>
                <label for="id_email"> Email institucional:
                    <input type="email" name="email" id="id_email"
                    required 
                    placeholder="Informe seu e-mail"
                    size="60"
                    pattern="^[\w\.-]+@aluno\.ce\.gov\.br$"
                    title="Somente emails @aluno.ce.gov.br serão aceitos">
                    <!---size indicando ao tamanho  numérico indicando quantos caracteres -->
                    <!---Uso de expressão regular para validar o campo - 
                    exemplo: o usuário só poderá colocar email do domínio rocketseat.com.br
                    * pattern=".+@aluno\.ce\.gov\.com\.br" 
                
                    ^: Este símbolo indica o início da string, ou seja, 
                    a expressão deve começar a partir desse ponto.
                    [\w\.-]+: Esta parte corresponde ao nome do usuário do e-mail. 
                    [\w\.-] significa que pode haver letras (\w), números, ponto (.), ou hífen (-). 
                    O sinal de mais (+) indica que essa sequência pode se repetir uma ou mais vezes, 
                    garantindo que tenhamos pelo menos um caractere no nome do usuário.
                    @: Este é o caractere '@' literal que separa o nome de usuário do domínio.
                    aluno\.ce\.gov\.br: Aqui temos o domínio que estamos procurando, 
                    "aluno.ce.gov.br", com cada ponto (.) escapado por uma barra invertida 
                    () para que seja interpretado literalmente como um ponto e não como
                    um caractere especial na expressão regular.
                    $: Este símbolo indica o fim da string, ou seja, 
                    a expressão deve terminar nesse ponto.

                    -->
                </label>
            </div>

             <!---- list
            *o id de uma tag <datalist> que está no mesmo documento 
            * <datalist> irá conter uma lista de valores prédefinidos a fim de sugerir ao usuário, quais valores estão disponíveis
            * Os valores do <datalist> que não forem
            compatíveis com o campo, não serão apresentados
            como sugestão
            --> 

            <!-- <div>
                <datalist id="list_cor_pele">
                    <option value="preto">Preto</option>
                    <option value="pardo">Pardo</option>
                    <option value="branco">Branco</option>
                    <option value="indigena">Indígena</option>
                </datalist>
                <label for="cores">Cor:
                    <input type="text" id="cores" list="list_cor_pele"/><br />
                </label>
            </div> -->

            <!-- SELECT-->
            <div>
                <label for="lista_cor_pele">Cor:
                    <select name="cor_pele" id="lista_cor_pele">
                        <option value="" disabled selected> Selecione sua cor</option>
                        <option value="preto">Preto</option>
                        <option value="pardo">Pardo</option>
                        <option value="branco">Branco</option>
                        <option value="indigena">Indígena</option>
                    </select><br/>
                </label>
            </div>

            <!--pattern
            * Expressão regular para validar o que está sendo digitado no campo
            * Altamente recomendado o uso de um padrão de
            segurança alta de senhas
            * exemplo: queremos que a senha contenha
            caracteres hexadecimais com o limite de no mínimo 4 e no máximo 8 caracteres _pattern="[0-9a-fA-F]{4,8}"
            -->

            <!--inputmode
                * poderá alterar o uso do teclado em smartphones
                * exemplo: queremos que o cliente só adicione
                números * inputmode="numeric"
            -->

            <!-- REGEX - Expressão regular (Regular expression)
                Aqui está o que cada parte do padrão significa:

                \(: Corresponde ao caractere de parêntese aberto "(".
                \d{2}: Corresponde a exatamente dois dígitos consecutivos.
                \): Corresponde ao caractere de parêntese fechado ")".
                " ": Corresponde a um espaço em branco.
                \d{5}: Corresponde a exatamente cinco dígitos consecutivos.
                -: Corresponde ao caractere de hífen "-".
                \d{4}: Corresponde a exatamente quatro dígitos consecutivos.
            -->

            <div>
                <label for="id_telefone">Telefone: 
                    <input type="text" id="id_telefone"  name="telefone"
                    inputmode="numeric"
                    pattern="\(\d{2}\) \d{5}-\d{4}" 
                    title="Coloque no mínimo 4 caracteres e no máximo 15 caracteres"
                    >
                </label>
            </div>

            <!--- autocomplete
                * on: permite a sugestão de: new-password ou current-password (se ja tiver a senha da pagina, ele tenta te dar um auto complete)
                * off: desabilita a opção de autocompletar
                * new-password: o navegador poderá sugerir uma nova senha
            -->
            <div>
                <label for="id_senha"> Senha:
                    <input name="senha" type="password" autocomplete="new-password">
                </label>
            </div>

            <div>
                <button type="submit">Enviar</button>
            </div>
        </fieldset>
    </form>

    <script type="module">
        // Importação
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";
    
        
        const firebaseConfig = {
          apiKey: "AIzaSyBD_3WzPZBm83lUW0pMLt48IdLpkovC1a8",
          authDomain: "teste-484d9.firebaseapp.com",
          projectId: "teste-484d9",
          storageBucket: "teste-484d9.appspot.com",
          messagingSenderId: "631993282858",
          appId: "1:631993282858:web:708a7715ffc0fda626ee53",
          measurementId: "G-ZQKVK9DSWK"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase();

        // Capture o formulário
        let form = document.getElementById("formulario");
        form.addEventListener('submit', (e) => {
      e.preventDefault(); // Evita o envio padrão do formulário

      // Capture os valores do formulário
      const nome = form['nome'].value;
      const email = form['email'].value;
      const cor_pele = form['cor_pele'].value;
      const telefone = form['telefone'].value;
      const senha = form['senha'].value;

      // Enviar os dados para o Firebase
      const usersRef = ref(database, 'users');
      push(usersRef, {
        nome: nome,
        email: email,
        cor_pele: cor_pele,
        telefone: telefone,
        senha: senha

      }).then(() => {
        console.log('Dados enviados com sucesso!');
        // Faça qualquer ação adicional aqui, como redirecionar o usuário ou exibir uma mensagem de sucesso.
      }).catch((error) => {
        console.error('Erro ao enviar dados:', error);
      });
    });
    </script> 
</body>
</html>